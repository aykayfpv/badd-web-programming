"use strict";(self.webpackChunkpackages_lecture=self.webpackChunkpackages_lecture||[]).push([[3301],{71184:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>d});var s=i(14041);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}},92758:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>l,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"web-programming/http/http-session-cookies","title":"Abschnitt 3 - Session und Cookies","description":"Cookies und Session-Management","source":"@site/docs/web-programming/http/cookie.mdx","sourceDirName":"web-programming/http","slug":"/http/session-cookies","permalink":"/badd-web-programming/docs/http/session-cookies","draft":false,"unlisted":false,"editUrl":"https://github.com/blutorange/badd-web-programming/tree/main/packages/lecture/docs/web-programming/http/cookie.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"http-session-cookies","slug":"/http/session-cookies","sidebar_position":3,"description":"Cookies und Session-Management"},"sidebar":"tutorialSidebar","previous":{"title":"Abschnitt 2 - URL","permalink":"/badd-web-programming/docs/http/url"},"next":{"title":"Abschnitt 4 - Caching","permalink":"/badd-web-programming/docs/http/caching"}}');var r=i(31085),t=i(71184);const o={id:"http-session-cookies",slug:"/http/session-cookies",sidebar_position:3,description:"Cookies und Session-Management"},d="Abschnitt 3 - Session und Cookies",a={},c=[{value:"Cookies",id:"cookies",level:2},{value:"Cookie-Parameter",id:"cookie-parameter",level:2},{value:"Session-Cookie",id:"session-cookie",level:2}];function h(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"abschnitt-3---session-und-cookies",children:"Abschnitt 3 - Session und Cookies"})}),"\n",(0,r.jsx)(n.p,{children:"Wir hatten im ersten Abschnitt gelernt, dass HTTP ein zustandsloses Protokoll\nist."}),"\n",(0,r.jsx)(n.p,{children:"Manchmal ist es aber erforderlich, dass ein Zustand zwischen Requests bewahrt\nwird. Das typische Beispiel hierf\xfcr sind Webseiten mit Login, etwa ein\nShop-Portal. Das Passwort wird nur einmal eingegeben, jeder folgende Aufruf\neiner Seite im Shop-Portal soll ohne erneute Eingabe des Passworts m\xf6glich sein."}),"\n",(0,r.jsx)(n.p,{children:"Die klassische L\xf6sung hierf\xfcr sind Cookies. Eine andere M\xf6glichkeit, die gerade\nim Zusammenhang mit auf REST-API basierenden Webapps verwendet wird, sind\nJWT-Token. Beiden Varianten ist gemeinsam, dass im Browser eine gemeine ID\naufbewahrt wird, die bei jedem Request mitgesendet wird. In diesem Abschnitt\nwollen wir uns nur Cookies anschauen."}),"\n",(0,r.jsx)(n.h2,{id:"cookies",children:"Cookies"}),"\n",(0,r.jsx)(n.p,{children:"Ein Cookie ist eine kleine Datenmenge, die der Browser automatisch bei jedem\nRequest mitsendet.  Jeder Cookie hat einen Namen, es k\xf6nnen verschiedene Cookies\nmit verschiedenen Namen gesetzt sein."}),"\n",(0,r.jsxs)(n.p,{children:["Zuerst muss der Server einen Cookie setzen. Dies kann er mit dem Response-Header\n",(0,r.jsx)(n.code,{children:"Set-Cookie"})," tun:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"HTTP/1.1 200 OK\nSet-Cookie: Preferred-Language=de\nSet-Cookie: Preferred-View=advanced\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Der Nutzer hatte beim Login die Sprache ",(0,r.jsx)(n.code,{children:"Deutsch"})," und den Ansichtsmodus\n",(0,r.jsx)(n.code,{children:"Fortgeschritten"})," gew\xe4hlt. Daher setzt der Server nun entsprechende Cookies,\ndamit diese Einstellungen beim n\xe4chsten Mal vorausgew\xe4hlt sind."]}),"\n",(0,r.jsx)(n.p,{children:"Nachdem die Cookies nun gesetzt ist, sendet der Browser diese bei jedem Mal mit:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"GET https://example.com/shop/cart\nCookie: Preferred-Language=de; Preferred-View=advanced\n"})}),"\n",(0,r.jsx)(n.h2,{id:"cookie-parameter",children:"Cookie-Parameter"}),"\n",(0,r.jsx)(n.p,{children:"Der Server kann zus\xe4tzlich noch einige Parameter angeben, wenn ein Cookie\ngesetzt wird."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"HTTP/1.1 200 OK\nSet-Cookie: Preferred-Language=de; Expires=Sat, 05 Apr 2025 03:75:64 GMT\n"})}),"\n",(0,r.jsx)(n.p,{children:"Einige m\xf6gliche Parameter sind:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Expires - Gibt an, wie lange der Cookie g\xfcltig ist. Nach Ablauf l\xf6scht der\nBrowser den Cookie."}),"\n",(0,r.jsxs)(n.li,{children:["Path - Pfad, unter dem der Cookie g\xfcltig ist. Der Browser sendet den Cookie\nnur unter diesen Pfaden mit. Ist ein Cookie beispielsweise auf den\nPfad ",(0,r.jsx)(n.code,{children:"/shop"})," gesetzt, wird der Cookie nicht mitgesendet, wenn der Nutzer\netwa ",(0,r.jsx)(n.code,{children:"https://example.com/blog"})," aufruft."]}),"\n",(0,r.jsx)(n.li,{children:"HttpOnly - Verbietet es JavaScript, aus den Cookie zuzugreifen. Sinnvoll\netwa bei Session-Cookies aus Sicherheitsgr\xfcnden."}),"\n",(0,r.jsx)(n.li,{children:"Secure - Der Browser setzt den Cookie nur, wenn HTTPS (nicht HTTP) verwendet\nwird. Auch dies dient der Sicherheit."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"session-cookie",children:"Session-Cookie"}),"\n",(0,r.jsx)(n.p,{children:"Mit Hilfe von Cookie k\xf6nnen wir so eine Session (=Sitzung) implementieren."}),"\n",(0,r.jsx)(n.p,{children:"Bei der 1. Anfrage generiert der Server eine zuf\xe4llige ID und setzt einen Cookie:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"HTTP/1.1 200 OK\nSet-Cookie: JSESSIONID=e229c71a-e303-4c4b-a5be-6ca42b44f336; Secure; HttpOnly\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Der Browser sendet nun diesen Cookie bei jedem Request mit. Meldet sich der\nNutzer jetzt an, speichern wir auf dem Server unter der ID\n",(0,r.jsx)(n.code,{children:"e229c71a-e303-4c4b-a5be-6ca42b44f336"}),", dass der Nutzer mit dieser Session-ID\nnun angemeldet ist. Somit muss der Nutzer sich beim n\xe4chsten Request nicht\nnochmal anmelden."]}),"\n",(0,r.jsxs)(n.admonition,{type:"warning",children:[(0,r.jsx)(n.p,{children:"Jeder, der die Session-ID hat, ist genauso wie der Nutzer eingelogged. Daher\nmuss diese vertraulich behandelt werden und darf nicht weitergegeben werden."}),(0,r.jsx)(n.p,{children:"Gute Webseiten erfordern vor kritischen Aktionen wie dem L\xf6schen von Daten, dass\nder Nutzer sicherheitshalber noch einmal sein Passwort eingibt."})]}),"\n",(0,r.jsx)(n.p,{children:"Um die Session ung\xfcltig zu machen, kann der Nutzer sich ausloggen. Dabei\nmarkiert der Server die Session als invalid. Die Session-ID ist nun nicht mehr\ng\xfcltig."})]})}function l(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);