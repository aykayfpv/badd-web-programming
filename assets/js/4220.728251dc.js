"use strict";(self.webpackChunkpackages_lecture=self.webpackChunkpackages_lecture||[]).push([[4220],{24220:(e,n,t)=>{t.r(n),t.d(n,{default:()=>r});const r='let urls = [];\nlet mediaStream = undefined;\n\n/**\n * Spielt Video von Webcam ab oder stopp es wieder.\n */\nasync function toggleVideo() {\n  // Video anhalten\n  if (mediaStream) {\n    mediaStream = null;\n    document.querySelector(".video").pause();\n    document.querySelector(".videos").innerHTML = "";\n    document.querySelector(".play-video").textContent = "Starte Video!";\n    document.querySelector(".take-screenshot").classList.add("hidden");\n    document.querySelector(".screens").innerHTML = "";\n    return;\n  }\n  // Video starten\n  try {\n    // Auf die Kamera zugreifen\n    const stream = await navigator.mediaDevices.getUserMedia({\n      audio: false,\n      video: true,\n    });\n\n    // Neues <video> erzeugen und mit der Kamera verbinden\n    const video = document.createElement("video");\n    video.classList.add("video");\n    video.srcObject = stream;\n    video.controls = true;\n    document.querySelector(".videos").append(video);\n    mediaStream = stream;\n    video.play();\n\n    // UI aktualisieren\n    document.querySelector(".play-video").textContent = "Stoppe Video!";\n    document.querySelector(".take-screenshot").classList.remove("hidden");\n  } catch (e) {\n    document.querySelector(".error").textContent =\n      `Konnte nicht auf Video zugreifen: ${e}`;\n  }\n}\n\n/**\n * Macht einen Screenshot, wenn gerade Video abgespielt wird.\n */\nasync function takeScreenshot() {\n  // Discard previously taken screenshots\n  for (const url of urls) {\n    URL.revokeObjectURL(url);\n  }\n  urls = [];\n\n  // Clean output\n  const screens = document.querySelector(".screens");\n  screens.innerHTML = "";\n\n  try {\n    // Take photo of each track and add to output\n    for (const track of mediaStream.getVideoTracks()) {\n      const capture = new ImageCapture(track);\n      const photo = await capture.takePhoto();\n      const img = document.createElement("img");\n      const url = URL.createObjectURL(photo);\n      urls.push(url);\n      img.src = url;\n      screens.append(img);\n    }\n  } catch (e) {\n    document.querySelector(".error").textContent =\n      `Konnte Screenshot nicht aufnehmen: ${e}`;\n  }\n}\n\ndocument\n  .querySelector(".take-screenshot")\n  .addEventListener("click", takeScreenshot);\ndocument.querySelector(".play-video").addEventListener("click", toggleVideo);\n'}}]);